<div class="rating-page-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Product Rating</mat-card-title>
      <mat-card-subtitle>Enter a product ID to view its rating information</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="rating-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Product ID</mat-label>
          <input matInput type="number" formControlName="productId" placeholder="e.g., 1" />
          <mat-icon matPrefix>inventory_2</mat-icon>
          <mat-error *ngIf="form.get('productId')?.hasError('required')">
            Product ID is required
          </mat-error>
          <mat-error *ngIf="form.get('productId')?.hasError('min')">
            Product ID must be at least 1
          </mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || loading">
          <mat-icon>search</mat-icon>
          Get Rating
        </button>
      </form>

      <!-- Loading State -->
      <div *ngIf="loading" class="loading-container">
        <mat-spinner diameter="50"></mat-spinner>
        <p>Loading rating...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !loading" class="error-container">
        <mat-chip-set>
          <mat-chip color="warn">
            <mat-icon>error</mat-icon>
            {{ error }}
          </mat-chip>
        </mat-chip-set>
      </div>

      <!-- Rating Data -->
      <div *ngIf="ratingData && !loading" class="rating-result">
        <mat-card class="result-card">
          <mat-card-header>
            <mat-card-title>Rating Information</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="rating-info">
              <div class="info-item">
                <span class="label">Product ID:</span>
                <mat-chip-set>
                  <mat-chip>{{ ratingData.product_id }}</mat-chip>
                </mat-chip-set>
              </div>
              <div class="info-item">
                <span class="label">Average Rating:</span>
                <mat-chip-set>
                  <mat-chip color="accent">
                    <mat-icon>star</mat-icon>
                    {{ ratingData.avg_rating | number: '1.2-2' }}
                  </mat-chip>
                </mat-chip-set>
              </div>
              <div class="info-item">
                <span class="label">Number of Ratings:</span>
                <mat-chip-set>
                  <mat-chip>{{ ratingData.count }}</mat-chip>
                </mat-chip-set>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-card-content>
  </mat-card>
</div>
